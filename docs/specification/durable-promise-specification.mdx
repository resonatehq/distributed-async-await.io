---
id: durable-promise-specification
title: Durable Promise Specification
sidebar_label: Durable Promise Specification
---

Within the Distributed Async Await specification, each execution, whether that is a function execution or an action taking place in the physical world, pairs to a promise.

Distributed Async Await requires that promise data objects are stored to disk, thus making the promises durable, and giving them the name Durable Promises.

A promise, also called future, awaitable, or deferred is a representation of a future value.
A promise is either pending or completed, that is, resolved or rejected: A promise is pending, signaling that the value is not yet available or completed, signaling success or failure.

![Promise lifecycle diagram](/img/promise-lifecycle.svg)

A promise is a coordination primitive: In a typical scenario, a downstream function execution creates a promise and awaits its completion.
An upstream function execution either resolves or rejects the promise.
On completion, the downstream execution resumes with the value of the promise.

## Application Programming Interface (API)

Logically, the Application Programming Interface (API) is divided in two parts, the Downstream API and the Upstream API.

![Promise API diagram](/img/promise-api.svg)

### Downstream API

- **Create**

  A downstream component may create a promise.

  ```
  Create(promise-id, idempotency-key, param, header, timeout, strict)
  ```

- **Cancel**

  A downstream component can cancel an existing promise.

  ```
  Cancel(promise-id, idempotency-key, value, header, strict)
  ```

- **Callback**

  A downstream component can register a callback on an existing promise.

  ```
  Callback(id, promise-id, root-promise-id, timeout, recv)
  ```

  A recv specifies the transport on which the callback will occur. Below is a non-exhaustive list of supported receivers.

  | Type   | Data                                                 | Shorthand            |
  | ------ | ---------------------------------------------------- | -------------------- |
  | `poll` | `{"group": "string", "id": "string"}`                | `poll://group:id`    |
  | `http` | `{"headers": {"string": "string"}, "url": "string"}` | `http://example.com` |

### Upstream API

- **Resolve**

  An upstream component can resolve an existing promise, signaling success.

  ```
  Resolve(promise-id, idempotency-key, value, header, strict)
  ```

- **Reject**

  An upstream component can reject a promise, signalling failure.

  ```
  Reject(promise-id, idempotency-key, value, header, strict)
  ```
